<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Visualizing Activities with activatr • activatr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Visualizing Activities with activatr">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">activatr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/activatr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/pace.html">Handling Speed and Pace with activatr</a></li>
    <li><a class="dropdown-item" href="../articles/parsing.html">Advanced Parsing with activatr</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dschafer/activatr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Visualizing Activities with activatr</h1>
                        <h4 data-toc-skip class="author">Daniel
Schafer</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dschafer/activatr/blob/master/vignettes/activatr.Rmd" class="external-link"><code>vignettes/activatr.Rmd</code></a></small>
      <div class="d-none name"><code>activatr.Rmd</code></div>
    </div>

    
    
<p><code>activatr</code> (pronounced like the word “activator”) is a
library for parsing GPX files into a standard format, and then
manipulating and visualizing those files.</p>
<div class="section level2">
<h2 id="getting-gpx-files">Getting GPX Files<a class="anchor" aria-label="anchor" href="#getting-gpx-files"></a>
</h2>
<p>The process to get a GPX file varies depending on the service you
use. In Garmin Connect, you can click the gear menu on an activity and
click “Export to GPX”. This package includes sample GPXs as
examples.</p>
</div>
<div class="section level2">
<h2 id="parsing-gpx-files">Parsing GPX Files<a class="anchor" aria-label="anchor" href="#parsing-gpx-files"></a>
</h2>
<p>Basic parsing of a GPX file is simple: we use the
<code><a href="../reference/parse_gpx.html">parse_gpx()</a></code> function and pass it the name of the GPX
file.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dschafer/activatr" class="external-link">activatr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the running_example.gpx file included with this package.</span></span>
<span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata"</span>,</span>
<span>  <span class="st">"running_example.gpx.gz"</span>,</span>
<span>  package <span class="op">=</span> <span class="st">"activatr"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_gpx.html">parse_gpx</a></span><span class="op">(</span><span class="va">filename</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/parse_gpx.html">parse_gpx()</a></code> returns an <code>act_tbl</code>, which has a
column for latitude (<code>lat</code>), longitude (<code>lon</code>),
elevation (<code>ele</code>, in meters), and time
(<code>time</code>).</p>
<table class="table">
<thead><tr class="header">
<th align="right">lat</th>
<th align="right">lon</th>
<th align="right">ele</th>
<th align="left">time</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">37.80405</td>
<td align="right">-122.4267</td>
<td align="right">17.0</td>
<td align="left">2018-11-03 14:24:45</td>
</tr>
<tr class="even">
<td align="right">37.80406</td>
<td align="right">-122.4267</td>
<td align="right">16.8</td>
<td align="left">2018-11-03 14:24:46</td>
</tr>
<tr class="odd">
<td align="right">37.80408</td>
<td align="right">-122.4266</td>
<td align="right">17.0</td>
<td align="left">2018-11-03 14:24:48</td>
</tr>
<tr class="even">
<td align="right">37.80409</td>
<td align="right">-122.4266</td>
<td align="right">17.0</td>
<td align="left">2018-11-03 14:24:49</td>
</tr>
<tr class="odd">
<td align="right">37.80409</td>
<td align="right">-122.4265</td>
<td align="right">17.2</td>
<td align="left">2018-11-03 14:24:50</td>
</tr>
</tbody>
</table>
<p><code>activatr</code> also overrides <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> to create
a basic one-row tibble summarizing the activity.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="5%">
<col width="11%">
<col width="11%">
<col width="19%">
<col width="19%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="right">Distance</th>
<th align="left">Date</th>
<th align="right">Time</th>
<th align="right">AvgPace</th>
<th align="right">MaxPace</th>
<th align="right">ElevGain</th>
<th align="right">ElevLoss</th>
<th align="right">AvgElev</th>
<th align="left">Title</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">9.407317</td>
<td align="left">2018-11-03 14:24:45</td>
<td align="right">4622s (~1.28 hours)</td>
<td align="right">491.319700445454s (~8.19 minutes)</td>
<td align="right">186.462178755299s (~3.11 minutes)</td>
<td align="right">193.9317</td>
<td align="right">259.2122</td>
<td align="right">-24.29198</td>
<td align="left">Sunrise 15K PR (sub-8:00)</td>
</tr></tbody>
</table>
<p>For more advanced parsing options, see
<code><a href="../articles/parsing.html">vignette("parsing")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="analyzing-gpx-files">Analyzing GPX Files<a class="anchor" aria-label="anchor" href="#analyzing-gpx-files"></a>
</h2>
<p>Since this is just a tibble, we can analyze and plot it using usual
techniques and libraries. <code>activatr</code> includes a few helpers,
like <code><a href="../reference/mutate_with_speed.html">mutate_with_speed()</a></code>, <code><a href="../reference/speed_to_mile_pace.html">speed_to_mile_pace()</a></code>
and <code><a href="../reference/pace_formatter.html">pace_formatter()</a></code> to make it easier to analyze pace
using these libraries.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/mutate_with_speed.html">mutate_with_speed</a></span><span class="op">(</span>lead <span class="op">=</span> <span class="fl">10</span>, lag <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pace <span class="op">=</span> <span class="fu"><a href="../reference/speed_to_mile_pace.html">speed_to_mile_pace</a></span><span class="op">(</span><span class="va">speed</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">pace</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">1200</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">pace</span><span class="op">)</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_reverse</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">pace_formatter</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Time"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Pace (min/mile)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="activatr_files/figure-html/pacegraph-1.png" width="700"></p>
<p>For more details on those helpers, see
<code><a href="../articles/pace.html">vignette("pace")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="visualizing-gpx-files">Visualizing GPX Files<a class="anchor" aria-label="anchor" href="#visualizing-gpx-files"></a>
</h2>
<p>Once we have the data, it’s useful to visualize it. While basic
visualizations work as expected with a data frame:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/qplot.html" class="external-link">qplot</a></span><span class="op">(</span><span class="va">lon</span>, <span class="va">lat</span>, data <span class="op">=</span> <span class="va">df</span><span class="op">)</span></span></code></pre></div>
<p><img src="activatr_files/figure-html/basicplot-1.png" width="700"></p>
<p>It’s more helpful to overlay this information on a map. To aid in
that, <code><a href="../reference/get_ggmap_from_df.html">get_ggmap_from_df()</a></code> is a wrapper around
<code><a href="https://rdrr.io/pkg/ggmap/man/get_map.html" class="external-link">ggmap::get_map()</a></code> that returns a correctly sized and zoomed
map, atop which we can visualize our track using
<code><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html" class="external-link">ggmap::ggmap()</a></code>.</p>
<p>Let’s see that on its own to start:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkahle/ggmap" class="external-link">ggmap</a></span><span class="op">)</span></span>
<span><span class="fu">ggmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html" class="external-link">ggmap</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_ggmap_from_df.html">get_ggmap_from_df</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="activatr_files/figure-html/mapplot_run-1.png" width="700"></p>
<p>We now have a map at the right size to visualize the run. Putting it
all together, we can make a nice basic graphic of the run:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html" class="external-link">ggmap</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_ggmap_from_df.html">get_ggmap_from_df</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">lon</span>, y <span class="op">=</span> <span class="va">lat</span><span class="op">)</span>, linewidth <span class="op">=</span> <span class="fl">1</span>, data <span class="op">=</span> <span class="va">df</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<p><img src="activatr_files/figure-html/finalplot_run-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Schafer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
